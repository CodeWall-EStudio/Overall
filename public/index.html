<!DOCTYPE html>
<html ng-app="index">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta name="author" content="hongyuan" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>综合评价</title>
	<link rel="stylesheet" href="css/main.css?t=1414509344969">
</head>
<body ng-controller="indexController">
 	<div class="header-blue">
 		<ul class="nav nav-tabs top-nav">
 			<li ng-class="{active:getMode()==='report'}" ng-click="switchMode('report')"><a>报表</a></li>
 			<li ng-class="{active:getMode()==='search'}" ng-click="switchMode('search')"><a>查询</a></li>
 		</ul>
 		<div class="userinfo" ng-controller="userController">
 			<span>{{my.name}}</span>
 			<a ng-class="{hide:User.auth===0}">管理</a>
 			<a ng-click="quitLogin()">退出</a>
 		</div>
 	</div>
 	<div class="toolbar"  ng-controller="toolbarController">
 		<!-- 报表工具条-->
 		<div class="toolbar toolbar-report" ng-show="reportMode === 'list'">
 			<div class="toolbar-left">
				选择学期：
				<div class="select-dom dropdown"  ng-controller="termController">
	 				<a class="dropdown-toggle" data-toggle="dropdown" ng-model="Term.name"> {{nowTerm.name}}<span class="caret"></span></a>
	 				<ul class="dropdown-menu" role="menu">
	 					<li ng-repeat="item in termList" ng-model="termList">
	 						<a ng-click="changeTerm(item._id)">{{item.name}}</a>
	 					</li>
	 				</ul> 	
				</div> 	

				选择老师：	
				<div class="select-dom dropdown"  ng-controller="teacherController">
	 				<a class="dropdown-toggle" data-toggle="dropdown" ng-model="Term.name"> {{nowTeacherGroup.name}}<span class="caret"></span></a>
	 				<ul class="dropdown-menu" role="menu">
	 					<li ng-repeat="item in teacherGroup" ng-model="teacherGroup">
	 						<a ng-click="changeTeacherGroup(item._id)">{{item.name}}</a>
	 					</li>
	 				</ul> 
				</div> 	 		
 			</div>		
 			<div class="toolbar-right">
				选择报表类型：
				<div class="select-dom dropdown" ng-controller="quotaController">
					<a class="dropdown-toggle" data-toggle="dropdown" ng-model="nowTerm">{{nowQuotaGroup.name}} <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li ng-repeat="item in quotaGroupList"><a ng-click="selectQuotaGroup($index)">{{item.name}}</a></li>
					</ul>
				</div> 	 
				<a>导出当前报表</a>			
				<a>导出完整报表</a>
 			</div>
 		</div>
 		<!-- 报表详情工具条-->
 		<div class="toolbar toolbar-report"  ng-show="reportMode === 'show'">
 			<div class="toolbar-left">
 				<button class="btn btn-default">返回报表</button>
 				查看详情 ： {{nowTeacher.teacherName}}（分组{{}}）
 				<button class="btn btn-default" ng-click="showReport(2)">评价报告</button>
 				<button class="btn btn-default" ng-click="showReport(0)">互评详情</button>
 				<button class="btn btn-default" ng-click="showReport(1)">生评明细</button>
		
 			</div>		
 			<div class="toolbar-right">	
				<a>导出评价报表</a>
 			</div>
 		</div> 		
 		<!-- 搜索工具条-->
 		<div class="toolbar toolbar-search" ng-hide="getMode() !== 'search' ">
 			<div class="toolbar-left">
				选择学期：
				<div class="select-dom dropdown"  ng-class="{hide:getActiveType('noselect')}">
					<a  class="dropdown-toggle" data-toggle="dropdown" ng-model="nowTerm">{{nowTerm.name}} <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li ng-repeat="item in termList"><a ng-click="selectTerm(item.id)">{{item.name}}</a></li>
					</ul>
				</div> 	
				查询被评价人 ：
	 			<div class="search-zone">
					<input type="text" ng-enter="startSearch()" ng-model="searchKeyWord" placeholder="查询被评价人" />
					<button type="submit" ng-click="startSearch()"  />
	 			</div>
 			</div>
 			<div class="toolbar-right">
 				选择报表类型
				<div class="select-dom dropdown" >
					<a class="dropdown-toggle" data-toggle="dropdown" ng-model="nowTerm">{{nowQuotaGroup.name}} <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li ng-repeat="item in quotaGroupList"><a ng-click="selectQuotaGroup($index)">{{item.name}}</a></li>
					</ul>
				</div> 	  				
 			</div>
 		</div> 	
 	</div>

 	<div class="content" >
 		<!--报表-->
 		<div class="content-report" ng-controller="reportController"  ng-show="reportMode === 'list'">
 			<table class="table table-striped table-hover">
 				<tr>
 					<th>姓名</th>
 					<th ng-repeat="item in nowQuotaGroup.indicators">{{item.name}}</th>
 					<th>指标组总分</th>
 				</tr>
 				<tr ng-repeat="item in reportList" ng-click="showOneReport(item)">
 					<td>{{item.teacherName}}</td>
 					<td ng-repeat="obj in item.scores track by $index">{{obj}}</td>
 					<td>{{item.totalScore}}</td>
 				</tr>
 			</table>
 		</div>
 		<!--评价报告详情-->
 		<div class="content-report" ng-show="reportSMode === 'all'">
 			<table class="table table-striped table-hover">
 				<tr>
 					<th>指标组</th>
 					<th>指标</th>
 					<th>得分</th>
 					<th>指标组总分</th>
 					<th>同组平均分</th>
 					<th>加权总分</th>
 					<th>同组加权平均分</th>
 				</tr>
 				<tr ng-repeat="item in nowTeacherReport.indicatorGroupScores">
					<td>
						{{item.name}} <a  data-toggle="modal" data-target="#quotaMore"  href="#">查看详情</a>
					</td>
 					<td>指标</td>
 					<td>得分</td>
 					<td>{{item.totalScore}}</td>
 					<td>同组平均分</td>
 					<td>加权总分</td>
 					<td>同组加权平均分</td>
 				</tr>
 			</table>
 		</div> 
 		<!--互评和生评明细-->
 		<div class="content-main" ng-show="reportSMode === 'teacher' || reportSMode === 'student'">
	 		<div class="content-list" ng-controller="relatController">
	 			<table class="table table-striped table-hover">
	 				<tr>
	 					<th>评价人</th>
	 					<th>分组</th>
	 					<th>打分</th>
	 				</tr>
	 				<tr ng-repeat="item in teacherRelatList.teachers">
	 					<td>{{item.name}}</td>
	 					<td>{{item.group}}</td>
	 					<td>{{item.value}}</td>
	 				</tr>
	 			</table>
	 		</div>	
	 		<div class="content-info" >
				<dl class="content-summary"  ng-hide="getMode() !== 'report'">
					<dt>
						总分平均分： {{oneReport.total}}
					</dt>
					<dt>
						<span class="tit">{{name}} 打分：{{score}}</span> 问卷：{{oneReport.questionnaire.name}}
					</dt>
				</dl>
				<dl class="content-score" ng-repeat="item in oneReport.questionnaire.questions">	
					<dt>{{item.name}}</dt>
					<dd class="score-info">
						<div>{{item.desc}}</div>
						<div class="score-num">
							打分 ：{{oneReport.scoresMap[item._id].score}}
						</div>
					</dd>
				</dl>			
	 		</div>
 		</div>
 		<!--搜索结果-->
 		<div class="content-report" ng-hide="getMode() !== 'search'">
 			<table class="table table-striped table-hover">
 				<tr>
 					<th>姓名</th>
 					<th>教育得分</th>
 					<th>教学得分</th>
 					<th>行政得分</th>
 					<th>总分</th>
 				</tr>
 				<tr ng-repeat="item in userList" ng-click="showUser(item._id)">
 					<td>{{item.name}}</td>
 					<td></td>
 					<td></td>
 					<td></td>
 					<td></td>
 				</tr>
 			</table>
 		</div>  		
 	</div>

 	<div class="modal fade" id="quotaMore" tabindex="-1" role="dialog" aria-hidden="true">
 		<div class="modal-dialog">
 			<div class="modal-content">
 				<div class="modal-header">
 					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
 				</div>
 				<div class="modal-body">
 					<table class="table table-striped table-hover">
 						<tr>
							<th>指标</th>
		 					<th>得分</th>
		 					<th>同组平均分</th>
	 					</tr>
	 					<tr>
							<td>指标</td>
		 					<td>得分</td>
		 					<td>同组平均分</td>
	 					</tr>
 					</table>
 				</div>
 			</div>
 		</div>
 	</div>

	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
	      </div>
	      <div class="modal-body">
	        ...
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary">Save changes</button>
	      </div>
	    </div>
	  </div>
	</div> 	
	<div ng-controller="msgController"></div>
 	<script src="js/lib/jslib.js"></script>

	<script src="js/index.js?t=1414509344969"></script>
</body>
</html>
