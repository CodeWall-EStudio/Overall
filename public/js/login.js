angular.module("ov.constant",[]).constant("MSG.ERROR.CODE","msg.codeshow").constant("LOGINED","status.logined").constant("STATUS.QUEST.LOAD","status.quest.load").constant("STATUS.USER.LOAD","status.user.load").constant("STATUS.LOGIN.STUDENT","status.login.student").constant("STATUS.LOGIN.TEACHER","status.login.TEACHER").constant("STATUS.QUOTA.LOAD","status.quota.load").constant("STATUS.TERM.LOAD","status.term.load").constant("STATUS.GRADE.CHANGE","status.grade.change").constant("STATUS.RELAT.GET","status.relat.get").constant("STATUS.STUDENT.GET","status.student.get").constant("STATUS.TERM.CHANGE","status.term.change").constant("STATUS.TEACHERGROUP.CHANGE","status.teachergroup.change").constant("STATUS.TEACHERGROUP.LOAD","status.teachergroup.load").constant("STATUS.QUOTAGROUP.CHANGE","status.quotagroup.change").constant("STATUS.GROUP.CHANGE","status.group.change").constant("STATUS.GROUP.LOAD","status.group.load").constant("STATUS.TABLE.CHANGE","status.table.change"),angular.module("ov.services.login",["ov.constant","ov.services.utils"]).service("loginService",["$rootScope","$location","$http","Util","MSG.ERROR.CODE","LOGINED",function(t,e,o,n,s){function r(){var t="/api/login";location.href=t}function a(e,r,a){var c=(new Date).getTime(),i=n.object.toUrlencodedString(e);o.post("/api/login/student?_="+c,i,{responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,o){0===e.err?window.location="/overall.html":t.$emit(s,e.err),r&&r(e,o)}).error(function(t,e){a&&a(t,e)})}return{teacherLogin:r,studentLogin:a}}]),angular.module("ov.services.utils",[]).service("Util",[function(){var t={object:{toUrlencodedString:function(t){return _.map(t,function(t,e){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}},getParameter:function(t){var e=new RegExp("(\\?|#|&)"+t+"=([^&#]*)(&|#|$)"),o=location.href.match(e);return decodeURIComponent(o?o[2]:"")},cookie:{get:function(t){var e=document.cookie.split("; "),o=_.reduce(e,function(t,e){var o=e.split("=");return t[o[0]]=o[1],t},{});return o[t]},set:function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var s=$.trim(o[n]);if(s.substring(0,t.length+1)==t+"="){e=decodeURIComponent(s.substring(t.length+1));break}}return e}},time:{timezoneOffset:(new Date).getTimezoneOffset(),dateToDatetimePickerValue:function(e,o){return e||(e=new Date),e.setMinutes(e.getMinutes()-t.time.timezoneOffset),o||(e.setSeconds(0),e.setMilliseconds(0)),e.toISOString().split(".")[0]},datetimePickerValueToTs:function(e){if(e){var o=e.split(":").length<3?":00.000Z":".000Z",n=Date.parse(e+o)+60*t.time.timezoneOffset*1e3;return console.log(e,n,new Date(n)),n}return 0}}};return t}]),angular.module("ov.controllers.login",["ov.constant","ov.services.utils","ov.services.login"]).controller("loginController",["$rootScope","$scope","Util","loginService",function(t,e,o,n){console.log("load toolbarController"),e.username="",e.pwd="",e.studentLogin=function(){console.log(e.username,e.pwd),n.studentLogin({name:e.username,id:e.pwd})}}]),angular.module("ov.controllers.msg",["ov.constant"]).controller("msgController",["$rootScope","$scope","$location","MSG.ERROR.CODE",function(t,e,o,n){console.log("load msgcontroller"),Messenger().options={extraClasses:"messenger-fixed messenger-on-bottom",theme:"flat"};var s=(o.absUrl(),{0:"操作成功!",11:"学期名称不能为空",12:"该学期还未激活",100:"该学生所在学期已经不存在, 被删除了吗?",1001:"您还没有登录!",1004:"没有找到资源!",1010:"您没有查看该资源的权限!",1011:"参数出错啦!",1013:"出错啦",1014:"同名啦,请修改名称!",1015:"已经归档啦!",1016:"该资源不能删除",1017:"该目录下还有其他文件，无法删除!",1041:"用户名或密码错误!",1043:"用户不存在!",1050:"时间交叉了!",1051:"已经有激活的学期"});t.$on(n,function(t,e){if(1001===e){var o="/api/login";return void(location.href=o)}var n={message:s[e]};parseInt(e)&&(n.type="error"),console.log(n),Messenger().post(n)})}]),function(){angular.module("login",["ov.controllers.login","ov.controllers.msg"])}();